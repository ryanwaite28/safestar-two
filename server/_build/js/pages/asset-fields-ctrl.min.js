"use strict";$(document).ready(function(){var t,s,e=location.pathname.split("/"),a=e[e.length-1],i=$("#new_asset_field_name"),n=$("#new_asset_field_value"),l=$("#asset_fields_count"),o=$("#asset_fields_list"),_=$("#asset_name_heading"),d={};client.check_session().then(function(e){return t=e,client.get_user_asset(a)}).then(function(e){return s=e.user_asset,_.text(s.name),client.get_asset_fields(s.id)}).then(function(e){console.log(t,s,e),tools.array_sort_by(e.asset_fields,"id","desc").forEach(function(e){d[e.unique_value]=e,o.append($(e.dom))}),l.text(Object.keys(d).length)}).catch(function(e){console.log("error",e)}),$(document).on("click","a#submit_new_asset_field_btn",function(){var e=i.val(),t=n.val();tools.setActionButtonsDisabledState(!0),client.add_asset_field({asset_field_name:e,asset_field_value:t,asset_id:s.id}).then(function(e){console.log(e),tools.setActionButtonsDisabledState(!1),window.M.toast({html:e.message}),e.error||(d[e.new_asset_field.unique_value]=e.new_asset_field,o.prepend($(e.new_asset_field.dom)),i.val(""),n.val(""),l.text(Object.keys(d).length))})}),$(document).on("click","a.edit_asset_field_btn",function(e){var t=$(this).data("asset_field_unique_value");$("#edit_asset_field_box_"+t).toggleClass("ghost-1")}),$(document).on("click","a.delete_asset_field_btn",function(e){var s=$(this).data("asset_field_unique_value"),t=d[s];t&&window.confirm('Are you sure you want to delete "'+t.name+'"?')&&(tools.setActionButtonsDisabledState(!0),client.delete_asset_field({asset_field_id:t.id}).then(function(e){if(console.log(e),tools.setActionButtonsDisabledState(!1),window.M.toast({html:e.message}),!e.error){var t=$("#asset_field_"+s);$(t).remove(),delete d[s],l.text(Object.keys(d).length)}}))}),$(document).on("click","a.submit_edits_asset_field_btn",function(e){var a=$(this).data("asset_field_unique_value"),t=d[a];if(t){var s="#edit_asset_field_value_input_"+a,i=$("#edit_asset_field_name_input_"+a).val(),n=$(s).val();tools.setActionButtonsDisabledState(!0),client.edit_asset_field({asset_field_name:i,asset_field_value:n,asset_field_id:t.id}).then(function(e){if(console.log(e),tools.setActionButtonsDisabledState(!1),window.M.toast({html:e.message}),!e.error){var t=$("#asset_field_"+a),s=$(e.asset_field.dom);t.replaceWith(s),d[a]=e.asset_field,l.text(Object.keys(d).length)}})}})});