"use strict";$(document).ready(function(){var t=$("#new_user_asset_name"),o=$("#user_assets_count"),s=$("#user_assets_list"),a=$("#first_name_span"),n=$("#middle_name_span"),_=$("#last_name_span"),i={},e=[client.check_session(),client.get_user_assets()];Promise.all(e).then(function(e){var t=e[0];a.text(tools.capitalize(t.user.fname)),n.text(tools.capitalize(t.user.mname)),_.text(tools.capitalize(t.user.lname)),tools.array_sort_by(e[1].user_assets,"id","desc").forEach(function(e){i[e.unique_value]=e,s.append($(e.dom))}),o.text(Object.keys(i).length),console.log(e,i)}).catch(function(e){console.log("error",e)}),$(document).on("click","a#submit_new_user_asset_btn",function(){var e=t.val();tools.setActionButtonsDisabledState(!0),client.add_user_asset({asset_name:e}).then(function(e){console.log(e),tools.setActionButtonsDisabledState(!1),window.M.toast({html:e.message}),e.error||(i[e.new_user_asset.unique_value]=e.new_user_asset,s.prepend($(e.new_user_asset.dom)),t.val(""),o.text(Object.keys(i).length))})}),$(document).on("click","a.edit_user_asset_btn",function(e){var t=$(this).data("user_asset_unique_value");$("#edit_user_asset_box_"+t).toggleClass("ghost-1")}),$(document).on("click","a.delete_user_asset_btn",function(e){var s=$(this).data("user_asset_unique_value"),t=i[s];t&&window.confirm('Are you sure you want to delete "'+t.name+'"?')&&(tools.setActionButtonsDisabledState(!0),client.delete_user_asset({asset_id:t.id}).then(function(e){if(console.log(e),tools.setActionButtonsDisabledState(!1),window.M.toast({html:e.message}),!e.error){var t=$("#user_asset_"+s);$(t).remove(),delete i[s],o.text(Object.keys(i).length)}}))}),$(document).on("click","a.submit_edits_user_asset_btn",function(e){var a=$(this).data("user_asset_unique_value"),t=i[a];if(t){var s="#edit_user_asset_value_input_"+a,n=$("#edit_user_asset_name_input_"+a).val();$(s).val(),tools.setActionButtonsDisabledState(!0),client.edit_user_asset({asset_name:n,asset_id:t.id}).then(function(e){if(console.log(e),tools.setActionButtonsDisabledState(!1),window.M.toast({html:e.message}),!e.error){var t=$("#user_asset_"+a),s=$(e.user_asset.dom);t.replaceWith(s),i[a]=e.user_asset,o.text(Object.keys(i).length)}})}})});