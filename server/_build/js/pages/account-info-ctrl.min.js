"use strict";$(document).ready(function(){var s=$("#new_user_field_name"),i=$("#new_user_field_value"),o=$("#user_fields_count"),l=$("#user_fields_list"),n=$("#first_name_span"),_=$("#middle_name_span"),u=$("#last_name_span"),a={},e=[client.check_session(),client.get_user_fields()];Promise.all(e).then(function(e){var t=e[0];n.text(tools.capitalize(t.user.fname)),_.text(tools.capitalize(t.user.mname)),u.text(tools.capitalize(t.user.lname)),tools.array_sort_by(e[1].user_fields,"id","desc").forEach(function(e){a[e.unique_value]=e,l.append($(e.dom))}),o.text(Object.keys(a).length),console.log(e,a)}).catch(function(e){console.log("error",e)}),$(document).on("click","a#submit_new_user_field_btn",function(){var e=s.val(),t=i.val();tools.setActionButtonsDisabledState(!0),client.add_user_field({user_field_name:e,user_field_value:t}).then(function(e){console.log(e),tools.setActionButtonsDisabledState(!1),window.M.toast({html:e.message}),e.error||(a[e.new_user_field.unique_value]=e.new_user_field,l.prepend($(e.new_user_field.dom)),s.val(""),i.val(""),o.text(Object.keys(a).length))})}),$(document).on("click","a.edit_user_field_btn",function(e){var t=$(this).data("user_field_unique_value");$("#edit_user_field_box_"+t).toggleClass("ghost-1")}),$(document).on("click","a.delete_user_field_btn",function(e){var s=$(this).data("user_field_unique_value"),t=a[s];t&&window.confirm('Are you sure you want to delete "'+t.name+'"?')&&(tools.setActionButtonsDisabledState(!0),client.delete_user_field({user_field_id:t.id}).then(function(e){if(console.log(e),tools.setActionButtonsDisabledState(!1),window.M.toast({html:e.message}),!e.error){var t=$("#user_field_"+s);$(t).remove(),delete a[s],o.text(Object.keys(a).length)}}))}),$(document).on("click","a.submit_edits_user_field_btn",function(e){var i=$(this).data("user_field_unique_value"),t=a[i];if(t){var s="#edit_user_field_value_input_"+i,l=$("#edit_user_field_name_input_"+i).val(),n=$(s).val();tools.setActionButtonsDisabledState(!0),client.edit_user_field({user_field_name:l,user_field_value:n,user_field_id:t.id}).then(function(e){if(console.log(e),tools.setActionButtonsDisabledState(!1),window.M.toast({html:e.message}),!e.error){var t=$("#user_field_"+i),s=$(e.user_field.dom);t.replaceWith(s),a[i]=e.user_field,o.text(Object.keys(a).length)}})}})});