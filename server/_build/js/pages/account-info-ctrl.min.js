"use strict";$(document).ready(function(){var t=$("#new_user_field_name"),_=$("#new_user_field_value"),u=$("#user_fields_count"),l=$("#user_fields_list"),s={},e=[client.check_session(),client.get_user_fields()];Promise.all(e).then(function(e){e[0];tools.array_sort_by(e[1].user_fields,"id","desc").forEach(function(e){s[e.unique_value]=e,l.append($(e.dom))}),u.text(Object.keys(s).length),console.log(e,s)}).catch(function(e){console.log("error",e)}),$(document).on("click","a#submit_new_user_field_btn",function(){var e=t.val(),i=_.val();client.add_user_field({user_field_name:e,user_field_value:i}).then(function(e){console.log(e),window.M.toast({html:e.message}),e.error||(s[e.new_user_field.unique_value]=e.new_user_field,l.prepend($(e.new_user_field.dom)),t.val(""),_.val(""),u.text(Object.keys(s).length))})}),$(document).on("click","a.edit_user_field_btn",function(e){var i=$(this).data("user_field_unique_value");$("#edit_user_field_box_"+i).toggleClass("ghost-1")}),$(document).on("click","a.delete_user_field_btn",function(e){var t=$(this).data("user_field_unique_value"),i=s[t];i&&window.confirm('Are you sure you want to delete "'+i.name+'"?')&&client.delete_user_field({user_field_id:i.id}).then(function(e){if(console.log(e),window.M.toast({html:e.message}),!e.error){var i=$("#user_field_"+t);$(i).remove(),delete s[t],u.text(Object.keys(s).length)}})}),$(document).on("click","a.submit_edits_user_field_btn",function(e){var _=$(this).data("user_field_unique_value"),i=s[_];if(i){var t="#edit_user_field_value_input_"+_,l=$("#edit_user_field_name_input_"+_).val(),n=$(t).val();client.edit_user_field({user_field_name:l,user_field_value:n,user_field_id:i.id}).then(function(e){if(console.log(e),window.M.toast({html:e.message}),!e.error){var i=$("#user_field_"+_),t=$(e.user_field.dom);i.replaceWith(t),s[_]=e.user_field,u.text(Object.keys(s).length)}})}})});